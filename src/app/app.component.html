<div class="top"></div>
<div class="container-fluid bg-white chat-box shadow-lg rounded">

  <div class="row h-100">
    <div class="col-md-4 pr-0 d-none d-md-block" #side1>
      <div class="card h-100">
        <div class="card-header">
          <div class="row">
            <div class="col-1 col-sm-1 col-md-1 d-md-none">
              <i class="fas fa-arrow-left d-md-none" style="font-size: 20px; cursor: pointer"  (click)="hideChatList()"></i>
            </div>
            <div class="col-9 col-sm-9  col-md-9">
              <img #profilePic src="../assets/pp.png" class="rounded-circle profile-pic" alt="..">
            </div>
            <div class="col-2 col-sm-2 col-md-2">
              <div class="dropleft">
                <span class="dropdown-toggle" data-toggle="dropdown" style="float: right;">
                  <i class="fas fa-ellipsis-v icon" style="cursor: pointer;"  (click)="hideChatList()"></i>
                </span>
                <div class="dropdown-menu">
                  <a href="#" #newChat class="dropdown-item disabled" (click)="populateFriendList()" data-toggle="modal" data-target="#modelFriendList">New Chat</a>
                  <!-- <a href="#" #linkSignIn (click)="onSignin()" class="dropdown-item">Sign In</a> -->
                  <a href="#"  #signOut (click)="onSignOut()" class="dropdown-item disabled">Sign Out</a>
                </div>

                <div class="modal fade" id="modelFriendList">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="card">
                        <div class="card-header">
                          Friend List
                          <span class="close" data-dismiss="modal" style="cursor: pointer;">&times;</span>
                        </div>
                        <ul class="list-group list-group-flush" id="listFriend">
                          <li class="list-group-item" style="background-color: #f8f8f8;">
                            <input type="text" placeholder="Search or new chat" class="form-control form-rounded">
                          </li>
                          <div class="text-center" *ngIf="isLoadedFrndList">
                            <span class="spinner-border text-primary mt-5" style="width: 6rem; height: 6rem;"></span>
                          </div>
                          <span *ngFor="let friend of friendList">
                          <li class="list-group-item list-group-item-action" (click)="starCthat()" *ngIf="currentUser != friend.email">
                            <div class="row" >
                              <div class="col-md-2" style="cursor: pointer;">
                              <img src="../assets/{{friend.photoURL}}" class="friend-pic rounded-circle" alt="..">
                              </div>
                              <div class="col-md-10" style="cursor: pointer;">
                                <div class="name">{{friend.name}}</div>
                              </div>
                            </div>
                          </li>
                        </span>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>


              </div>
            </div>
          </div>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item" style="background-color: #f8f8f8;">
            <input type="text" placeholder="Search or new chat" class="form-control form-rounded">
          </li>

          <li class="list-group-item list-group-item-action" (click)="starCthat()">
            <div class="row">
              <div class="col-md-2" style="cursor: pointer;">
              <img src="../assets/pp.png" class="friend-pic" alt="..">
              </div>
              <div class="col-md-10" style="cursor: pointer;">
                <div class="name">Any Name</div>
                <div class="under-name">This is some message text..</div>
              </div>
            </div>
          </li>
          <li class="list-group-item list-group-item-action">
            <div class="row">
              <div class="col-md-2" style="cursor: pointer;">
              <img src="../assets/pp.png" class="friend-pic" alt="..">
              </div>
              <div class="col-md-10" style="cursor: pointer;">
                <div class="name">Any Name</div>
                <div class="under-name">This is some message text..</div>
              </div>
            </div>
          </li>

          <li class="list-group-item list-group-item-action">
            <div class="row">
              <div class="col-md-2" style="cursor: pointer;">
              <img src="../assets/pp.png" class="friend-pic" alt="..">
              </div>
              <div class="col-md-10" style="cursor: pointer;">
                <div class="name">Any Name</div>
                <div class="under-name">This is some message text..</div>
              </div>
            </div>
          </li>

        </ul>
      </div>
    </div>
    <div class="col-md-8 pl-0" #side2>
      <div class="card " #chatPanel style="display: none;">
        <div class="card-header">
          <div class="row">
            <div class="col-1 col-sm-1 col-md-1 col-lg-1">
              <i class="fas fa-list mt-2 d-md-none" style="cursor: pointer;" (click)="showChatList()"></i>
            </div>
            <div class="col-2 col-sm-2 col-md-2 col-lg-1">
              <img src="../assets/pp.png" class="profile-pic" alt="..">
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-7">
              <div class="name">Any Name</div>
              <div class="under-name">Last seen 9/8/2019</div>
            </div>
            <div class="col-3 col-sm-3 col-md-3 col-lg-3 icon">
              <i class="fas fa-search"></i>
              <i class="fas fa-paperclip ml-4"></i>
              <i class="fas fa-ellipsis-v ml-4 "></i>
            </div>
          </div>
        </div>

        <div class="card-body" id="messages" #scrollMe [scrollTop]="scrollMe.scrollHeight">
          <div class="row">
            <div class="col-2 col-sm-1 col-md-1">
              <img src="../assets/pp.png" class="chat-pic" alt="..">
            </div>
            <div class="col-6 col-sm-7 col-md-7">
              <p class="recive">
                This is text from anywhere
                <!-- This is text from anywhere -->
              <span class="time float-right">1:28 PM</span>
              </p>
            </div>
          </div>

          <div class="row justify-content-end"  *ngFor="let msg of reciverMessage">
            <div class="col-6 col-sm-7 col-md-7">
              <p class="sent float-right">
                {{msg.text}}
                <!-- This is text from anywhere -->
              <span class="time float-right">1:28 PM</span>
              </p>
            </div>
            <div class="col-2 col-sm-1 col-md-1">
              <img src="../assets/pp.png" class="chat-pic" alt="..">
            </div>
          </div>
        </div>

        <div class="card-footer">
          <div class="row">
            <div class="col-2 col-md-1">
              <i class="far fa-grin fa-2x"></i>
            </div>
            <div class="col-8 col-md-10">
              <input #inputField  (keydown)="onKeydown($event)" type="text" placeholder="Type here" class="form-control form-rounded">
            </div>
            <div class="col-2 col-md-1">
              <i class="fas fa-microphone fa-2x"></i>
            </div>
          </div>
        </div>
      </div>
      <div  #divStart  class="text-center">
        <i class="fas fa-comments mt-5" style="font-size: 250px;"></i>
        <h2 class="mt-3">Select your friend from the list and start chat</h2>
        <a href="#" (click)="showChatList()" class="d-md-none">New Chat</a>
        <!-- <button (click)="signIn()" class="btn btn-primary">Sign In</button> -->
        <button type="button" class="btn btn-primary mr-4" data-toggle="modal" data-target="#exampleModalCenter1">
          Sign In
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter2">
          Sign up
        </button>
        
      </div>
    </div>
  </div>


  <!-- Sign In Modal -->
<div  class="modal fade" id="exampleModalCenter1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5> -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">

        <form [formGroup]="signInForm" (ngSubmit)="onSignin()">
          <div class="form-group">  
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" autocomplete="off" class="form-control" formControlName="email" placeholder="Enter email">
            <small *ngIf="!signUpForm.get('email').valid && signUpForm.get('email').touched" class="form-text text-danger">Please Enter Valid Email</small>
          </div>

          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" autocomplete="off" class="form-control" formControlName="password" id="exampleInputPassword1" placeholder="Password">
            <!-- <small *ngIf="isPassword" class="form-text text-danger">Password is required</small> -->
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary mr-3" data-dismiss="modal">Close</button>
        <button type="submit" #dismisModal  class="btn btn-primary ">Submit</button>
        </div>
        </form>
      </div>
      
    </div>
  </div>
</div>


<!-- Sign Up Modal -->
<div  class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle2" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5> -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">

        <form [formGroup]="signUpForm" (ngSubmit)="onSignUp()">
          <div class="form-group">
            <label for="exampleInputEmail1">Name</label>
            <input type="text" class="form-control" id="name"  formControlName="name" placeholder="Enter name">
            <!-- <small *ngIf="isName" class="form-text text-danger">Name is required</small> -->
          </div>
          <div class="form-group">  
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" autocomplete="off" class="form-control" formControlName="email" placeholder="Enter email">
            <small *ngIf="!signUpForm.get('email').valid && signUpForm.get('email').touched" class="form-text text-danger">Please Enter Valid Email</small>
          </div>

          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" autocomplete="off" class="form-control" formControlName="password" id="exampleInputPassword1" placeholder="Password">
            <!-- <small *ngIf="isPassword" class="form-text text-danger">Password is required</small> -->
          </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary mr-3" data-dismiss="modal">Close</button>
        <button type="submit" #dismisModal  class="btn btn-primary ">Submit</button>
        </div>
        </form>
      </div>
      
    </div>
  </div>
</div>

</div>
<router-outlet></router-outlet>